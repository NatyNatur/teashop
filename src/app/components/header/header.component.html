<header>
    <nav class="navbar navbar-expand-lg h-100" aria-label="Offcanvas navbar large">
        <div class="container">
            <div class="col-8 col-md-4 col-lg-3 px-xl-4">
                <a class="navbar-brand" [routerLink]="['']">
                    <img src="../../../assets/img/logo/naturtea.png" alt="logo" class="img-fluid">
                </a>
            </div>
            <button class="navbar-toggler" type="button" (click)="isCollapsed = !isCollapsed"
                [attr.aria-expanded]="isCollapsed" data-bs-target="#offcanvasNavbar2" aria-controls="offcanvasNavbar2">
                <!-- <span class="navbar-toggler-icon"></span> -->
                <i class="bi bi-list fs-1"></i>
            </button>
            <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar2"
                aria-labelledby="offcanvasNavbar2Label" [collapse]="isCollapsed" [isAnimated]="true">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasNavbar2Label">Menú</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"
                        (click)="isCollapsed = !isCollapsed"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav justify-content-start flex-grow-1 ps-3 fw-bold">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" [routerLink]="['']" (click)="getScreenWidth < 992 ? isCollapsed = true : isCollapsed = false">Inicio</a>
                        </li>
                        <li *ngFor="let cat of cateList; let i = index">
                            <ng-container *ngIf="cat.category_status === 'active'">
                                <ng-container *ngIf="cat.subcategories!.length > 0; else noSubc">
                                    <a class="nav-link dropdown-toggle" type="button"
                                    (click)="toggleDropdown(cat.category_id);" [attr.aria-expanded]="!dropdownStates[cat.category_id]"
                                    (blur)="dropdownStates[cat.category_id] = false">
                                        {{cat.category_name}}
                                    </a>
                                    <ul class="dropdown-menu rounded-0 p-0" [collapse]="!dropdownStates[cat.category_id]" 
                                        [isAnimated]="true">
                                        <li *ngFor="let subcategory of cat.subcategories; let j = index;">
                                            <a class="dropdown-item" [routerLink]="['/categoria']" 
                                                [queryParams]="{id: subcategory.subcategory_id, name: subcategory.subcategory_name}"
                                                (click)="getScreenWidth < 992 ? isCollapsed = true : isCollapsed = false">
                                                {{subcategory.subcategory_name}}</a>
                                        </li>
                                        <li>
                                            <a class="dropdown-item" [routerLink]="['/categoria']"
                                            [queryParams]="{id: cat.category_id, name: 'Todos'}"
                                            (click)="getScreenWidth < 992 ? isCollapsed = true : isCollapsed = false">Todos</a>
                                        </li>
                                    </ul>
                                </ng-container>
                                <ng-template #noSubc>
                                    <a class="nav-link" [routerLink]="['/categoria']" (click)="getScreenWidth < 992 ? isCollapsed = true : isCollapsed = false"
                                        [queryParams]="{id: cat.category_id, name: cat.category_name}">{{cat.category_name}}</a>
                                </ng-template>

                            </ng-container>
                        </li>

                        <!-- <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="javascript:void(0)" role="button"
                                (click)="navTeaIsCollapsed = false" [attr.aria-expanded]="navTeaIsCollapsed"
                                data-bs-target="#navTea" (blur)="navTeaIsCollapsed = true">
                                Té e Infusiones
                            </a>
                            <ul class="dropdown-menu rounded-0 p-0" [collapse]="navTeaIsCollapsed" id="navTea"
                                [isAnimated]="true">
                                <li><a class="dropdown-item" href="#">Negro</a></li>
                                <li><a class="dropdown-item" href="#">Blanco</a></li>
                                <li><a class="dropdown-item" href="#">Rooibos</a></li>
                                <li><a class="dropdown-item" [routerLink]="['/categoria']"
                                        [queryParams]="{id: 'VUCTWM9H3Jp1XV5EfbR1', name: 'Todo Té e Infusiones'}">
                                        Todos</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" [routerLink]="['/categoria']"
                                [queryParams]="{id: '8FfPTQ0Tq9L34sv0IdaB', name: 'Regalos'}">Regalos</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="javascript:void(0)" role="button"
                                (click)="accIsCollapsed = false" [attr.aria-expanded]="accIsCollapsed"
                                (blur)="accIsCollapsed = true" data-bs-target="#navAccesories">
                                Accesorios
                            </a>
                            <ul class="dropdown-menu rounded-0 p-0" [collapse]="accIsCollapsed" id="navAccesories"
                                [isAnimated]="true">
                                <li><a class="dropdown-item" href="#">Bombillas</a></li>
                                <li><a class="dropdown-item" href="#">Coladores</a></li>
                                <li><a class="dropdown-item" href="#">Tazas</a></li>
                                <li><a class="dropdown-item" href="#">Termos</a></li>
                                <li><a class="dropdown-item" [routerLink]="['/categoria']"
                                        [queryParams]="{id: 'g9Exdkk2IEteAvrStzq5', name: 'Todo Accesorios'}"> Todos</a>
                                </li>
                            </ul>
                        </li> -->
                    </ul>
                    <!-- <form class="d-flex mt-3 mt-lg-0" role="search">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit"><i class="bi bi-person-fill"></i></button>
                </form> -->
                    <div class="d-flex navIcons">
                        <a type="button" (click)="prueba()"
                            (click)="getScreenWidth < 992 ? isCollapsed = true : isCollapsed = false"
                            class="text-reset me-3"><i class="bi bi-person-fill fs-4"></i></a>
                        <a [routerLink]="['carrito']"
                            (click)="getScreenWidth < 992 ? isCollapsed = true : isCollapsed = false"
                            class="text-reset "><i class="bi bi-cart2 fs-4"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</header>